# Clair Configuration
# Generated by Ansible - Do not edit manually
# =============================================

http_listen_addr: :{{ clair_http_port }}
introspection_addr: :{{ clair_introspection_port }}
log_level: {{ clair_log_level }}

indexer:
  connstring: host={{ quay_hostname }} port={{ postgresql_port }} dbname={{ clair_postgresql_database }} user={{ postgresql_user }} password={{ vault_postgresql_password }} sslmode=disable
  scanlock_retry: 10
  layer_scan_concurrency: 5
  migrations: true

matcher:
  connstring: host={{ quay_hostname }} port={{ postgresql_port }} dbname={{ clair_postgresql_database }} user={{ postgresql_user }} password={{ vault_postgresql_password }} sslmode=disable
  max_conn_pool: 100
  migrations: true

notifier:
  connstring: host={{ quay_hostname }} port={{ postgresql_port }} dbname={{ clair_postgresql_database }} user={{ postgresql_user }} password={{ vault_postgresql_password }} sslmode=disable
  migrations: true
  delivery_interval: 1m
  poll_interval: 5m
  webhook:
    target: https://{{ quay_hostname }}/secscan/notification
    callback: https://{{ quay_hostname }}/secscan/notification

auth:
  psk:
    key: {{ vault_quay_secret_key | b64encode }}
    iss:
      - quay
      - clairctl

updaters:
  sets:
    - alpine
    - aws
    - debian
    - oracle
    - photon
    - pyupio
    - rhel
    - suse
    - ubuntu
